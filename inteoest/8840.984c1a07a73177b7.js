"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8840],{8840:(B,v,g)=>{g.r(v),g.d(v,{AltaPrimariaPageModule:()=>I});var x=g(6814),P=g(95),r=g(6728),O=g(3213),u=g(5861),h=g(8162),Z=g(5619),n=g(9212),J=g(1960),E=g(5472),k=g(8969),S=g(9862);function F(a,d){if(1&a&&(n.TgZ(0,"ion-select-option",32),n._uU(1),n.qZA()),2&a){const l=d.$implicit;n.Q6J("value",l),n.xp6(1),n.Oqu(l)}}function N(a,d){if(1&a){const l=n.EpF();n.TgZ(0,"ion-item",35),n.NdJ("click",function(){const o=n.CHM(l).index,i=n.oxw(2);return n.KtG(i.selectPlace(o))}),n._UZ(1,"ion-icon",36),n.TgZ(2,"ion-label",37)(3,"h2",38),n._uU(4),n.qZA(),n.TgZ(5,"p",39),n._uU(6),n.qZA()()()}if(2&a){const l=d.$implicit;n.ekj("selected",l.selected),n.xp6(4),n.Oqu(null==l?null:l.data.structured_formatting.main_text),n.xp6(2),n.Oqu(null==l?null:l.data.description)}}function q(a,d){if(1&a&&(n.TgZ(0,"ion-list",33),n.YNc(1,N,7,4,"ion-item",34),n.qZA()),2&a){const l=n.oxw();n.xp6(1),n.Q6J("ngForOf",l.places)}}function w(a,d){if(1&a){const l=n.EpF();n.TgZ(0,"ion-grid",40)(1,"ion-row",41)(2,"ion-col",42)(3,"ion-label",43),n._UZ(4,"ion-icon",44),n._uU(5," Latitud "),n.qZA(),n.TgZ(6,"ion-input",45),n.NdJ("ngModelChange",function(e){n.CHM(l);const o=n.oxw();return n.KtG(o.latitude=e)}),n.qZA()(),n.TgZ(7,"ion-col",42)(8,"ion-label",43),n._UZ(9,"ion-icon",46),n._uU(10," Longitud "),n.qZA(),n.TgZ(11,"ion-input",45),n.NdJ("ngModelChange",function(e){n.CHM(l);const o=n.oxw();return n.KtG(o.longitude=e)}),n.qZA()()()()}if(2&a){const l=n.oxw();n.xp6(6),n.Q6J("ngModel",l.latitude),n.xp6(5),n.Q6J("ngModel",l.longitude)}}const z=[{path:"",component:(()=>{var a;class d{setOpen(t){this.isModalOpen=t}get search_places(){return this._places.asObservable()}constructor(t,e,o,i,c,s,C,M,b,p){var m=this;this.Firebase=t,this.loadingController=e,this.alertController=o,this.authService=i,this.router=c,this.loader=s,this.zone=C,this.httpClient=M,this.modalController=b,this.platform=p,this.isModalOpen=!1,this.showLocation=!0,this.isLoading=!1,this.avisoPrivacidadAceptado=!1,this.nombre="",this.photoTaken=!1,this.photoTaken2=!1,this.textoReconocido="",this.clavex="",this.places=[],this._places=new Z.X([]),this.municipios=["Apozol","Apulco","Atolinga","Benito Ju\xe1rez","Calera","Ca\xf1itas de Felipe Pescador","Concepci\xf3n del Oro","Cuauht\xe9moc","Chalchihuites","Fresnillo","Trinidad Garc\xeda de la Cadena","Genaro Codina","General Enrique Estrada","General Francisco R. Murgu\xeda","El Plateado de Joaqu\xedn Amaro","El Salvador","General P\xe1nfilo Natera","Guadalupe","Huanusco","Jalpa","Jerez","Jim\xe9nez del Teul","Juan Aldama","Juchipila","Loreto","Luis Moya","Mazapil","Melchor Ocampo","Mezquital del Oro","Miguel Auza","Momax","Monte Escobedo","Morelos","Moyahua de Estrada","Nochistl\xe1n de Mej\xeda","Noria de \xc1ngeles","Ojocaliente","P\xe1nuco","Pinos","R\xedo Grande","Sain Alto","Santa Mar\xeda de la Paz","Sombrerete","Susticac\xe1n","Tabasco","Tepechitl\xe1n","Tepetongo","Teul de Gonz\xe1lez Ortega","Tlaltenango de S\xe1nchez Rom\xe1n","Trancoso","Valpara\xedso","Vetagrande","Villa de Cos","Villa Garc\xeda","Villa Gonz\xe1lez Ortega","Villa Hidalgo","Villanueva","Zacatecas"],this.performOCR=function(){var f=(0,u.Z)(function*(A){const L={requests:[{image:{content:A},features:[{type:"TEXT_DETECTION"}]}]};try{var _;const y=(null===(_=(yield m.httpClient.post("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyC6ygqJC89Kg3C3vf8BOu9FMJj1xMk84Vg",L).toPromise()).responses[0])||void 0===_||null===(_=_.fullTextAnnotation)||void 0===_?void 0:_.text)||"",T=y.indexOf("CLAVE DE ELECTOR");if(-1!==T){const Y=y.substr(T+16,19);m.clavex=Y}else m.presentAlert("Advertencia",'No se encontr\xf3 la "Clave de Elector"')}catch{}});return function(A){return f.apply(this,arguments)}}(),this.takePicture2=(0,u.Z)(function*(){const f=yield h.V1.getPhoto({quality:100,allowEditing:!1,resultType:h.dk.Base64,source:h.oK.Prompt,saveToGallery:!1});m.photoTaken2=!0,m.imageSource2="data:image/png;base64,"+f.base64String,m.foto2=f.base64String})}ngOnInit(){localStorage.getItem("isloggedAltaPrimeraria")||this.router.navigate(["/login-alta"],{replaceUrl:!0}),this.platform.backButton.subscribeWithPriority(0,()=>{}),this.getUserName(),this.showLocation=!1,this.placeSub=this.search_places.subscribe({next:e=>{this.places=e},error:e=>{}})}onSearchChange(t){var e=this;return(0,u.Z)(function*(){e.query=t.detail.value,e.query.length>0&&(yield e.getPlaces())})()}getPlaces(){var t=this;return(0,u.Z)(function*(){try{let e=new google.maps.places.AutocompleteService,i=(yield new Promise(c=>{e.getPlacePredictions({input:t.query,componentRestrictions:{country:"mx"}},s=>{c(s||[])})})).map(c=>({data:c,selected:!1}));for(let c of i)try{let s=yield t.geoCode(c.data.description);c.data.places={title:c.data.structured_formatting.main_text,address:c.data.description,lat:s.lat,lng:s.lng}}catch{}t._places.next(i)}catch{}})()}selectPlace(t){this._places.value.forEach((o,i)=>{o.selected=i===t});const e=this._places.value.find(o=>o.selected);e&&(this.query=e.data.description,this.latitude=e.data.places.lat,this.longitude=e.data.places.lng),this._places.next(e?[e]:[])}geoCode(t){let e={lat:"",lng:""};return new Promise((o,i)=>{(new google.maps.Geocoder).geocode({address:t},s=>{s&&s.length>0?(e.lat=s[0].geometry.location.lat(),e.lng=s[0].geometry.location.lng(),o(e)):i()})})}getUserName(){var t=this;return(0,u.Z)(function*(){try{(yield t.authService.getCurrentUser()).subscribe(o=>{o&&o.displayName&&(t.userName=o.displayName)})}catch{}})()}logout(){var t=this;return(0,u.Z)(function*(){if(yield t.confirmationAlert("Confirmaci\xf3n","\xbfEst\xe1s seguro de cerrar sesi\xf3n?"))try{yield t.authService.signOut(),localStorage.removeItem("isloggedAltaPrimeraria"),t.router.navigate(["/login-alta"])}catch{}})()}takePicture(){var t=this;return(0,u.Z)(function*(){try{const e=yield h.V1.getPhoto({quality:100,allowEditing:!1,resultType:h.dk.Base64,source:h.oK.Prompt,saveToGallery:!1});t.loading=yield t.loadingController.create({message:"Extrayendo informaci\xf3n...",spinner:"lines-sharp-small",cssClass:"custom-loading"}),yield t.loading.present(),t.photoTaken=!0,t.imageSource="data:image/png;base64,"+e.base64String,t.foto=e.base64String,yield t.performOCR(e.base64String)}catch{}finally{t.loading&&(yield t.loading.dismiss())}})()}getPhoto(){return this.imageSource}getPhoto2(){return this.imageSource2}verificarExistenciaRegistro(t){var e=this;return(0,u.Z)(function*(){try{return yield e.Firebase.verificarExistenciaClave(t)}catch{return!1}})()}saveData(t,e,o,i,c,s,C,M,b){var p=this;return(0,u.Z)(function*(){if(!(t&&e&&o&&M&&b&&i&&c&&C))return void p.presentAlert("Error","Por favor completa todos los campos.");if(yield p.verificarExistenciaRegistro(C))return void p.presentAlert("Error","Ya existe un registro con la misma clave de elector.");const f={latitude:t,longitude:e,nombre:o,code:i,query:c,telefono:s,clavex:C,curp:M,municipio:b};if(yield p.confirmationAlert("Confirmaci\xf3n","\xbfEst\xe1s seguro de guardar los datos?"))try{yield p.Firebase.uploadRegistro(f,p.foto),p.presentAlert("Registro Exitoso","El registro se complet\xf3 exitosamente.")}catch{p.presentAlert("Error","Hubo un error durante el registro. Por favor, int\xe9ntelo nuevamente.")}})()}limpiarCampos(){var t=this;return(0,u.Z)(function*(){(yield t.confirmationAlert("Confirmaci\xf3n","\xbfEst\xe1s seguro de limpiar todos los campos?"))&&(t.latitude="",t.longitude="",t.query="",t.nombre="",t.estado="",t.localidad="",t.municipio="",t.direccion="",t.colonia="",t.telefono="",t.clavex="",t.curp="",t.selectedMunicipio="",t.foto=null,t.foto2=null,t._places.next([]),t.photoTaken=!1,t.photoTaken2=!1,t.imageSource=null,t.imageSource2=null,t.avisoPrivacidadAceptado=!1)})()}confirmationAlert(t,e){var o=this;return(0,u.Z)(function*(){return new Promise(function(){var i=(0,u.Z)(function*(c){yield(yield o.alertController.create({header:t,message:e,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondard",handler:()=>{c(!1)}},{text:"Aceptar",handler:()=>{c(!0)}}]})).present()});return function(c){return i.apply(this,arguments)}}())})()}presentAlert(t,e){var o=this;return(0,u.Z)(function*(){yield(yield o.alertController.create({header:t,message:e,buttons:["OK"]})).present()})()}ngOndestroy(){this.placeSub&&this.placeSub.unsubscribe()}}return(a=d).\u0275fac=function(t){return new(t||a)(n.Y36(J.O),n.Y36(r.HT),n.Y36(r.Br),n.Y36(k.j),n.Y36(O.F0),n.Y36(r.HT),n.Y36(n.R0b),n.Y36(S.eN),n.Y36(r.IN),n.Y36(E.t4))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-alta-primaria"]],decls:49,vars:13,consts:[[1,"ion-no-border"],["slot","start"],["slot","end"],["fill","solid","color","light",1,"bordered",3,"click"],["color","custom","name","log-out"],["lines","none",1,"bordered"],["src","/assets/icon.png"],[1,"ion-margin-start"],[1,"container"],["lines","full",1,"ion-no-padding","dif2"],["slot","start",1,"thumbnail"],["alt","",3,"src"],[2,"color","rgb(255, 255, 255)"],["fill","clear",3,"click"],["name","camera",1,"large-camera-icon"],["lines","none"],["maxlength","18","placeholder","Clave de elector",1,"ion-margin-start",3,"ngModel","ngModelChange"],["placeholder","Seleccionar municipio",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Secci\xf3n",1,"custom-input",2,"font-size","16px","margin-left","10px",3,"ngModel","ngModelChange"],["placeholder","Nombre completo",1,"ion-margin-start",3,"ngModel","ngModelChange"],["placeholder","CURP","maxlength","18","pattern","[A-Z0-9]*",1,"ion-margin-start",3,"ngModel","ngModelChange"],["placeholder","N\xfamero de tel\xe9fono","type","tel","maxlength","10",1,"ion-margin-start",3,"ngModel","ngModelChange"],["lines","none",1,"dif","no-margin"],["search-icon","search-outline","animated","true","show-clear-button","focus","clear-icon","trash-bin","debounce","800","placeholder","Buscar direcci\xf3n",1,"no-margin",3,"ngModel","ngModelChange","ionInput"],["style","max-width: 300px; --ion-background-color: transparent; margin-top: 0; margin-bottom: 0;",4,"ngIf"],["class","ion-padding",4,"ngIf"],[1,"custom-container"],["expand","full","shape","round","color","primary",1,"font",2,"color","white",3,"click"],["slot","start","name","checkmark-circle-outline"],["expand","full","shape","round","color","dark",1,"custom-rounded-button",3,"click"],["slot","start","name","refresh-outline"],[3,"value"],[2,"max-width","300px","--ion-background-color","transparent","margin-top","0","margin-bottom","0"],["class","dif","lines","none","style","--background: transparent; padding-top: 0; padding-bottom: 0; margin-top: 0; margin-bottom: 0;",3,"selected","click",4,"ngFor","ngForOf"],["lines","none",1,"dif",2,"--background","transparent","padding-top","0","padding-bottom","0","margin-top","0","margin-bottom","0",3,"click"],["name","location-outline","slot","start",1,"custom-icon",2,"font-size","20px","margin-right","8px"],[1,"ion-text-wrap",2,"margin-top","0","margin-bottom","0"],[2,"font-weight","bold","margin-top","0","margin-bottom","4px"],["color","light",1,"blanco",2,"margin-top","0","margin-bottom","0"],[1,"ion-padding"],[1,"ion-align-items-center"],["size","6"],[1,"ion-text-center",2,"font-weight","bold","font-size","14px"],["name","location"],["readonly","",1,"ion-text-center",2,"font-size","12px",3,"ngModel","ngModelChange"],["name","compass"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-label"),n._uU(4,"INTEOEST"),n.qZA()(),n.TgZ(5,"ion-buttons",2)(6,"ion-button",3),n.NdJ("click",function(){return e.logout()}),n._UZ(7,"ion-icon",4),n.qZA()()(),n.TgZ(8,"ion-item",5)(9,"ion-avatar",1),n._UZ(10,"img",6),n.qZA(),n.TgZ(11,"ion-label",7),n._uU(12,"Alta"),n.qZA()()(),n.TgZ(13,"ion-content")(14,"div",8)(15,"ion-item",9)(16,"ion-thumbnail",10),n._UZ(17,"img",11),n.qZA(),n.TgZ(18,"ion-label")(19,"h2"),n._uU(20,"Foto INE"),n.qZA(),n.TgZ(21,"p",12),n._uU(22,"Presiona el bot\xf3n para capturar una foto"),n.qZA()(),n.TgZ(23,"ion-button",13),n.NdJ("click",function(){return e.takePicture()}),n._UZ(24,"ion-icon",14),n.qZA()(),n.TgZ(25,"ion-item",15)(26,"ion-input",16),n.NdJ("ngModelChange",function(i){return e.clavex=i}),n.qZA()(),n.TgZ(27,"ion-item",15)(28,"ion-select",17),n.NdJ("ngModelChange",function(i){return e.selectedMunicipio=i}),n.YNc(29,F,2,2,"ion-select-option",18),n.qZA()(),n.TgZ(30,"ion-item",15)(31,"ion-input",19),n.NdJ("ngModelChange",function(i){return e.code=i}),n.qZA()(),n.TgZ(32,"ion-item",15)(33,"ion-input",20),n.NdJ("ngModelChange",function(i){return e.nombre=i}),n.qZA()(),n.TgZ(34,"ion-item",15)(35,"ion-input",21),n.NdJ("ngModelChange",function(i){return e.curp=i}),n.qZA()(),n.TgZ(36,"ion-item",15)(37,"ion-input",22),n.NdJ("ngModelChange",function(i){return e.telefono=i}),n.qZA()(),n.TgZ(38,"ion-item",23)(39,"ion-searchbar",24),n.NdJ("ngModelChange",function(i){return e.query=i})("ionInput",function(i){return e.onSearchChange(i)}),n.qZA()(),n.YNc(40,q,2,1,"ion-list",25)(41,w,12,2,"ion-grid",26),n.qZA(),n.TgZ(42,"div",27)(43,"ion-button",28),n.NdJ("click",function(){return e.saveData(e.latitude,e.longitude,e.nombre,e.code,e.query,e.telefono,e.clavex,e.curp,e.selectedMunicipio)}),n._UZ(44,"ion-icon",29),n._uU(45," Guardar "),n.qZA(),n.TgZ(46,"ion-button",30),n.NdJ("click",function(){return e.limpiarCampos()}),n._UZ(47,"ion-icon",31),n._uU(48," Limpiar Campos "),n.qZA()()()),2&t&&(n.xp6(16),n.ekj("show",e.photoTaken),n.xp6(1),n.Q6J("src",e.getPhoto(),n.LSH),n.xp6(9),n.Q6J("ngModel",e.clavex),n.xp6(2),n.Q6J("ngModel",e.selectedMunicipio),n.xp6(1),n.Q6J("ngForOf",e.municipios),n.xp6(2),n.Q6J("ngModel",e.code),n.xp6(2),n.Q6J("ngModel",e.nombre),n.xp6(2),n.Q6J("ngModel",e.curp),n.xp6(2),n.Q6J("ngModel",e.telefono),n.xp6(2),n.Q6J("ngModel",e.query),n.xp6(1),n.Q6J("ngIf",(null==e.places?null:e.places.length)>0),n.xp6(1),n.Q6J("ngIf",e.showLocation))},dependencies:[x.sg,x.O5,P.JJ,P.nD,P.c5,P.On,r.BJ,r.YG,r.Sm,r.wI,r.W2,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.Nd,r.VI,r.t9,r.n0,r.Bs,r.sr,r.QI,r.j9],styles:["*[_ngcontent-%COMP%]{font-family:Nunito,sans-serif}.thumbnail[_ngcontent-%COMP%]{padding-right:8px;display:none}.thumbnail.show[_ngcontent-%COMP%]{display:block}.thumbnail2[_ngcontent-%COMP%]{padding-right:8px;display:none}.thumbnail2.show[_ngcontent-%COMP%]{display:block}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #f1f5f8;background:#f1f5f8;padding:0 10px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .bordered[_ngcontent-%COMP%]{--border-radius: 10px;--box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #FFFFFF}ion-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:14px}ion-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px}ion-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{--border-radius: 40%}ion-content[_ngcontent-%COMP%]{--background: rgba(100, 145, 187, .9)}ion-content[_ngcontent-%COMP%]   .slides[_ngcontent-%COMP%]{background:#f1f5f8;padding:4px 10px 20px;border-radius:0 0 28px 28px}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:100%;box-shadow:none;border-radius:14px;padding:14px;background:rgba(255,255,255,.8)}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50px;background:#FFFFFF;box-shadow:7px 7px 20px #dbdfe2,-7px -7px 20px #fff;display:flex;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]{padding-top:14px}ion-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:6px 20px;color:#fff}ion-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: rgba(255,255,255,.1);padding:0;margin:14px 0;--border-radius: 14px;color:#fff;font-weight:600}ion-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding:6px 0}ion-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;font-size:16px}ion-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#ffffffa8}ion-content[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-bottom:8px}.custom-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.large-camera-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px;box-shadow:0 4px 8px #0000001a}.custom-icon[_ngcontent-%COMP%]{color:#fff;justify-content:center;align-items:center;text-align:center;font-size:24px;margin-right:8px}.no-margin[_ngcontent-%COMP%]{margin:0!important}.ion-no-margin[_ngcontent-%COMP%]{margin-right:0!important}.blanco[_ngcontent-%COMP%], #aviso-privacidad[_ngcontent-%COMP%]{color:#fff}"]}),d})()}];let U=(()=>{var a;class d{}return(a=d).\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[O.Bz.forChild(z),O.Bz]}),d})(),I=(()=>{var a;class d{}return(a=d).\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[x.ez,P.u5,r.Pc,U]}),d})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{8969:(L,v,s)=>{s.d(v,{j:()=>P});var d=s(5861),i=s(9212),u=s(7213),f=s(7104);let P=(()=>{var r;class Z{constructor(o,a){this.ngFireAuth=o,this.firestore=a}registerUser(o,a,_,g){var C=this;return(0,d.Z)(function*(){try{var h,x;const m=yield C.ngFireAuth.createUserWithEmailAndPassword(o,a);return yield null===(h=m.user)||void 0===h?void 0:h.updateProfile({displayName:_}),yield C.firestore.collection("users").doc(null===(x=m.user)||void 0===x?void 0:x.uid).set({phoneNumber:g}),m}catch(m){throw m}})()}getUserCode(){var o=this;return(0,d.Z)(function*(){try{const a=yield o.ngFireAuth.currentUser;if(a){const g=(yield o.firestore.collection("users").doc(a.uid).get().toPromise()).data();if(g&&"object"==typeof g&&"phoneNumber"in g)return g.phoneNumber}}catch(a){return console.error("Error getting user phone number:",a),null}})()}loginUser(o,a){var _=this;return(0,d.Z)(function*(){return yield _.ngFireAuth.signInWithEmailAndPassword(o,a)})()}resetPassword(o){var a=this;return(0,d.Z)(function*(){return yield a.ngFireAuth.sendPasswordResetEmail(o)})()}signOut(){var o=this;return(0,d.Z)(function*(){return yield o.ngFireAuth.signOut()})()}getProlfile(){var o=this;return(0,d.Z)(function*(){return yield o.ngFireAuth.currentUser})()}getCurrentUser(){var o=this;return(0,d.Z)(function*(){return o.ngFireAuth.user})()}}return(r=Z).\u0275fac=function(o){return new(o||r)(i.LFG(u.zQ),i.LFG(f.ST))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),Z})()},6488:(L,v,s)=>{s.r(v),s.d(v,{LoginPageModule:()=>M});var d=s(6814),i=s(95),u=s(6728),f=s(3213),P=s(5861),r=s(9212),Z=s(8969);function A(e,c){1&e&&(r.TgZ(0,"ion-text"),r._uU(1," Email is required "),r.qZA())}function o(e,c){1&e&&(r.TgZ(0,"ion-text"),r._uU(1," Email should be valid "),r.qZA())}function a(e,c){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,A,2,0,"ion-text",8)(2,o,2,0,"ion-text",8),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",null==t.errorControl.email||null==t.errorControl.email.errors?null:t.errorControl.email.errors.required),r.xp6(1),r.Q6J("ngIf",null==t.errorControl.email||null==t.errorControl.email.errors?null:t.errorControl.email.errors.pattern)}}function _(e,c){1&e&&(r.TgZ(0,"ion-text"),r._uU(1," Password is required "),r.qZA())}function g(e,c){1&e&&(r.TgZ(0,"ion-text"),r._uU(1," Password must have at least one character and one number "),r.qZA())}function C(e,c){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,_,2,0,"ion-text",8)(2,g,2,0,"ion-text",8),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",null==t.errorControl.password||null==t.errorControl.password.errors?null:t.errorControl.password.errors.required),r.xp6(1),r.Q6J("ngIf",null==t.errorControl.password||null==t.errorControl.password.errors?null:t.errorControl.password.errors.pattern)}}const h=()=>["/reset-password"],m=[{path:"",component:(()=>{var e;class c{constructor(n,l,p,y,T){this.formBuilder=n,this.loadingController=l,this.alertController=p,this.authService=y,this.router=T}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[i.kI.required,i.kI.email,i.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],password:["",[i.kI.required,i.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9]+$")]]})}get errorControl(){return this.loginForm.controls}login(){var n=this;return(0,P.Z)(function*(){const l=yield n.loadingController.create({message:"Iniciando sesi\xf3n..."});yield l.present();try{var p;null!==(p=n.loginForm)&&void 0!==p&&p.valid&&((yield n.authService.loginUser(n.loginForm.value.email,n.loginForm.value.password).catch(T=>{l.dismiss(),n.presentErrorAlert("Error de inicio de sesi\xf3n","Hubo un error al intentar iniciar sesi\xf3n. Por favor, int\xe9ntalo de nuevo.")}))?(l.dismiss(),n.router.navigate(["/ui-home"])):n.presentErrorAlert("Credenciales incorrectas","Por favor, proporcione valores correctos para iniciar sesi\xf3n."))}catch{}finally{l.dismiss()}})()}presentErrorAlert(n,l){var p=this;return(0,P.Z)(function*(){yield(yield p.alertController.create({header:n,message:l,buttons:["OK"]})).present()})()}}return(e=c).\u0275fac=function(n){return new(n||e)(r.Y36(i.qu),r.Y36(u.HT),r.Y36(u.Br),r.Y36(Z.j),r.Y36(f.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-login"]],decls:22,vars:6,consts:[[3,"fullscreen"],[1,"header"],[1,"title"],[1,"subTitle"],[3,"formGroup"],[1,"ion-padding"],["type","email","formControlName","email","placeholder","email",1,"input"],["name","person-outline",2,"color","#3e81a8"],[4,"ngIf"],["type","password","formControlName","password","placeholder","password",1,"input"],["name","lock-closed-outline",2,"color","#3e81a8"],[1,"forgotPassword"],[2,"color","#3e81a8",3,"routerLink"],["shape","round","expand","full",2,"--background","#3e81a8","color","white",3,"click"]],template:function(n,l){1&n&&(r.TgZ(0,"ion-content",0)(1,"div",1),r._UZ(2,"br"),r.TgZ(3,"ion-title",2),r._uU(4,"Bienvenido "),r.qZA(),r.TgZ(5,"p",3),r._uU(6,"Inicia sesi\xf3n para acceder a tu cuenta"),r.qZA()(),r.TgZ(7,"form",4)(8,"div",5)(9,"ion-item"),r._UZ(10,"ion-input",6)(11,"ion-icon",7),r.qZA(),r.YNc(12,a,3,2,"div",8),r.TgZ(13,"ion-item"),r._UZ(14,"ion-input",9)(15,"ion-icon",10),r.qZA(),r.YNc(16,C,3,2,"div",8),r.TgZ(17,"div",11)(18,"a",12),r._uU(19,"\xbfOlvid\xf3 su contrase\xf1a?"),r.qZA()()(),r.TgZ(20,"ion-button",13),r.NdJ("click",function(){return l.login()}),r._uU(21," Iniciar sesi\xf3n "),r.qZA()()()),2&n&&(r.Q6J("fullscreen",!0),r.xp6(7),r.Q6J("formGroup",l.loginForm),r.xp6(5),r.Q6J("ngIf",l.loginForm.controls.email.touched&&l.loginForm.controls.email.invalid),r.xp6(4),r.Q6J("ngIf",l.loginForm.controls.password.touched&&l.loginForm.controls.password.invalid),r.xp6(2),r.Q6J("routerLink",r.DdM(5,h)))},dependencies:[d.O5,i._Y,i.JJ,i.JL,u.YG,u.W2,u.gu,u.pK,u.Ie,u.yW,u.wd,u.j9,u.Fo,i.sg,i.u,f.rH],styles:['@charset "UTF-8";.input[_ngcontent-%COMP%]{font-size:300}ion-item[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:16px}.header[_ngcontent-%COMP%]{margin-top:100px;margin-bottom:80px;text-align:center}.header[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{color:gray;font-size:.9rem}.signupLink[_ngcontent-%COMP%]{display:flex;margin:auto;flex-direction:row;align-content:center;position:absolute;justify-content:center;left:0;bottom:0;width:80%;right:0}.signupLink[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.signupLink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.forgotPassword[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.forgotPassword[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:.8rem;text-decoration:none}ion-button[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px}']}),c})()}];let F=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[f.Bz.forChild(m),f.Bz]}),c})(),M=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[d.ez,i.u5,u.Pc,i.UX,F]}),c})()}}]);